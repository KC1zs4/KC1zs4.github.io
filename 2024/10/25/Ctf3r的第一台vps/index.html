<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="HandheldFriendly" content="True" />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=5"
    />
    <meta name="description" content="给曾经一窍不通的自己的总结，其实看官方文档就ok了，这一篇做一个记录，后面忘记了也可以quick start  1. 购买服务器 建议 看看优惠页面，直接搜索即可 看看试用 如果是学生的话搜索时添加个学生就够了 入门的话感觉瞄准阿里云(免费额度也够)就好了，不用太在不同平台间挣扎浪费时间   我现在暂时用的是阿里云的服务器试用，美味的白嫖 注意自己注意时间，给的是要3个月内使用的300元体验 一">
<meta property="og:type" content="article">
<meta property="og:title" content="ctf3r的第一台vps">
<meta property="og:url" content="https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/index.html">
<meta property="og:site_name" content="KC1zs4&#39;s Blog">
<meta property="og:description" content="给曾经一窍不通的自己的总结，其实看官方文档就ok了，这一篇做一个记录，后面忘记了也可以quick start  1. 购买服务器 建议 看看优惠页面，直接搜索即可 看看试用 如果是学生的话搜索时添加个学生就够了 入门的话感觉瞄准阿里云(免费额度也够)就好了，不用太在不同平台间挣扎浪费时间   我现在暂时用的是阿里云的服务器试用，美味的白嫖 注意自己注意时间，给的是要3个月内使用的300元体验 一">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-10-25T06:11:04.882Z">
<meta property="article:modified_time" content="2025-01-09T01:33:42.398Z">
<meta name="twitter:card" content="summary">    
    <link
        rel="shortcut icon"
        href="/images/favicon.ico"
    />
       
    <link
        rel="icon"
        type="image/png"
        href="/images/favicon-192x192.png"
        sizes="192x192"
    />
       
    <link
        rel="apple-touch-icon"
        sizes="180x180"
        href="/images/apple-touch-icon.png"
    />
      
    <!-- title -->
    <title>ctf3r的第一台vps</title>
    <!-- async scripts -->
    <!-- Google Analytics -->

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z6JGRC9FT2"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-Z6JGRC9FT2');
  </script>

 <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
     
    <!-- mathjax -->
    
<meta name="generator" content="Hexo 7.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/tags/">Tag</a></li><!--
     --><!--
       --><li><a href="/categories/">Category</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2024/10/26/php%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E7%9A%84%E5%B0%8F%E8%AE%B0/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2024/09/15/CS61B%E5%B0%8F%E7%BB%9321/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/&text=ctf3r的第一台vps"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/&title=ctf3r的第一台vps"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/&is_video=false&description=ctf3r的第一台vps"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=ctf3r的第一台vps&body=Check out this article: https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/&title=ctf3r的第一台vps"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/&title=ctf3r的第一台vps"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/&title=ctf3r的第一台vps"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/&title=ctf3r的第一台vps"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/&name=ctf3r的第一台vps&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/&t=ctf3r的第一台vps"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E8%B4%AD%E4%B9%B0%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.</span> <span class="toc-text">1. 购买服务器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AE%E4%B8%8Evscode"><span class="toc-number">2.</span> <span class="toc-text">2. 配置与vscode</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%83%A8%E7%BD%B2%E6%9C%8D%E5%8A%A1"><span class="toc-number">3.</span> <span class="toc-text">3. 部署服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#nodejs-%E6%89%8B%E5%8A%A8%E7%9B%B4%E6%8E%A5%E9%83%A8%E7%BD%B2ok"><span class="toc-number">3.1.</span> <span class="toc-text">nodejs: 手动直接部署ok</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lnmp-phpstudy"><span class="toc-number">3.2.</span> <span class="toc-text">lnmp: phpstudy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#php-%E6%8E%A8%E8%8D%90-docker"><span class="toc-number">3.3.</span> <span class="toc-text">php(推荐): docker</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%9F%9F%E5%90%8D%E8%AE%BE%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">4. 域名设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q-A"><span class="toc-number">5.</span> <span class="toc-text">Q&amp;A</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SV-%E9%98%BF%E9%87%8C%E4%BA%91Docker%E7%9A%84php%E6%9C%8D%E5%8A%A1%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%EF%BC%9F"><span class="toc-number">5.1.</span> <span class="toc-text">SV | 阿里云Docker的php服务无法访问？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SV-bt%E9%83%A8%E7%BD%B2php%E6%9C%8D%E5%8A%A1%E9%9D%A2%E6%9D%BF%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%EF%BC%9F"><span class="toc-number">5.2.</span> <span class="toc-text">SV | bt部署php服务面板无法访问？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SV-%E9%98%BF%E9%87%8C%E4%BA%91Docker%E7%9A%84php%E6%9C%8D%E5%8A%A1%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6"><span class="toc-number">5.3.</span> <span class="toc-text">SV | 阿里云Docker的php服务写入文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SV-%E9%98%BF%E9%87%8C%E4%BA%91php-S-0-0-0-0-port%E5%BC%80%E5%90%AF%E6%9C%8D%E5%8A%A1%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE"><span class="toc-number">5.4.</span> <span class="toc-text">SV | 阿里云php -S 0.0.0.0:port开启服务无法访问</span></a></li></ol></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        ctf3r的第一台vps
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name"></span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2024-10-25T06:11:04.882Z" class="dt-published" itemprop="datePublished">2024-10-25</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/%E9%85%8D%E7%BD%AE/">配置</a>
    </div>


      

    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <blockquote>
<p>给曾经一窍不通的自己的总结，其实看官方文档就ok了，这一篇做一个记录，后面忘记了也可以quick start</p>
</blockquote>
<h2 id="1-购买服务器"><a href="#1-购买服务器" class="headerlink" title="1. 购买服务器"></a>1. 购买服务器</h2><ol>
<li>建议<ol>
<li>看看优惠页面，直接搜索即可</li>
<li>看看试用</li>
<li>如果是学生的话搜索时添加个学生就够了</li>
<li>入门的话感觉瞄准阿里云(免费额度也够)就好了，不用太在不同平台间挣扎浪费时间</li>
</ol>
</li>
<li>我现在暂时用的是阿里云的服务器试用，美味的白嫖<ol>
<li>注意自己注意时间，给的是要3个月内使用的300元体验</li>
<li>一个月检查一次吧</li>
</ol>
</li>
</ol>
<h2 id="2-配置与vscode"><a href="#2-配置与vscode" class="headerlink" title="2. 配置与vscode"></a>2. 配置与vscode</h2><ol>
<li><a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/ecs/getting-started/getting-started?spm=a2c4g.11186623.0.0.4802629cDcbhgp">看看官方入门文档</a></li>
<li>Quick Start<ol>
<li>购买服务器<ol>
<li>流量先切换为固定，0流量</li>
<li>直接开机</li>
<li>开机后修改为按流量付费，数值为100</li>
</ol>
</li>
<li>安全组设置，快速添加+手动<ol>
<li>手动我是起的reShell和docker服务</li>
</ol>
</li>
<li>设置用户<ol>
<li>如果是root用户登录且没有ecs-xxx的情形<ol>
<li>S1: <code>useradd ecs-xxx</code></li>
<li>S2(可跳过): <code>usermod -aG ecs-users ecs-xxx</code></li>
<li>S3: <code>usermod -aG wheel ecs-xxx</code>，添加到sudo中</li>
<li>S4: <code>su ecs-xxx</code></li>
</ol>
</li>
<li>有一些没有可以选择root或者ecs-user的机型可能会有出现无法登录root的情况 –&gt; <a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/ecs/use-cases/log-on-to-a-linux-instance-by-using-an-ssh-key-pair-as-a-regular-user">看看这篇</a></li>
</ol>
</li>
<li>设置密码登录(workbench)<ol>
<li><a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/ecs/user-guide/manage-remote-connection-users">官方文档见添加更多用户那里，这里不是重置初始用户(如果是root)</a></li>
</ol>
</li>
<li>设置ssh连接<ol>
<li><a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/ecs/user-guide/manage-remote-connection-users">官方文档见添加更多用户那里，这里不是重置初始用户(如果是root)</a></li>
<li>本地生成公钥密钥，把公钥放到远程vps</li>
</ol>
</li>
<li>设置不可以用密码登录root<ol>
<li>vim &#x2F;etc&#x2F;ssh&#x2F;sshd_config，将PermitRootLogin设置为no<ol>
<li><a target="_blank" rel="noopener" href="https://developer.aliyun.com/article/1024602">参考文章</a></li>
</ol>
</li>
</ol>
</li>
<li>开启php的docker服务</li>
</ol>
</li>
<li>vscode个人配置<ol>
<li>连接配置<ol>
<li>在windows中连接；wsl无法再连向远程了，cs144可以是因为再容器中；需要再windows中设置</li>
</ol>
</li>
<li>文件传输配置: ftp<ol>
<li>local-&gt;remote，无法remote-&gt;local, 否则我就不用来开vps了</li>
<li>在windows中使用的，可以直接cv</li>
<li>也可以考虑wsl文件先放到Win中，然后win中在终端传到云服务器上<ol>
<li>wsl与windows针对云通用的文件夹: <code>YUN</code>，可以设置别名(toYUN)<ol>
<li>wsl中设置环境变量<code>YUN</code>方便将文件传入到windows中<code>cp my_file $YUN</code>，windows中可以直接使用<code>toYUN</code>别名切换到$YUN文件夹中来传文件(我用到bash)</li>
</ol>
</li>
<li>在ww2yun文件夹开启sftp服务：<code>sftp</code>(<strong>文件相对路径默认传输到<code>/home/user/</code>文件夹下</strong>)<ol>
<li>可以使用<code>ls</code>, <code>cd</code>, <code>pwd</code>, <code>rm</code>, <code>mkdir</code>, <code>rmdir</code>来管理</li>
<li><code>get -r remote_file remote_dir</code></li>
<li><code>put -r local_file remote_dir</code></li>
<li>使用<code>bye</code>或者<code>exit</code>退出</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="3-部署服务"><a href="#3-部署服务" class="headerlink" title="3. 部署服务"></a>3. 部署服务</h2><h3 id="nodejs-手动直接部署ok"><a href="#nodejs-手动直接部署ok" class="headerlink" title="nodejs: 手动直接部署ok"></a>nodejs: 手动直接部署ok</h3><blockquote>
<p>原因就是易上手</p>
</blockquote>
<ol>
<li><a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/ecs/use-cases/summary-of-website-building-methods?spm=a2c4g.11186623.0.0.66c840f10Z91oO#p-43l-u9m-c5v">阿里云教程</a></li>
<li>搭建node.js环境，有教程，直接看就好</li>
<li>搞一个路由文件就OK了，方便进行文件包含和访问</li>
</ol>
<h3 id="lnmp-phpstudy"><a href="#lnmp-phpstudy" class="headerlink" title="lnmp: phpstudy"></a>lnmp: phpstudy</h3><ol>
<li>ref[<a target="_blank" rel="noopener" href="https://old.xp.cn/phpstudy-linux/install.html]%EF%BC%8C%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7%E5%91%BD%E4%BB%A4%E4%B8%BA%60xp%60%EF%BC%8C%60xp%60%E5%BC%80%E5%90%AF%E9%9D%A2%E6%9D%BF%E5%90%8E%E7%99%BB%E5%BD%95%E9%9D%A2%E6%9D%BF%60%E5%85%AC%E7%BD%91ip:port%60%E5%B0%B1%E5%A5%BD%E4%BA%86">https://old.xp.cn/phpstudy-linux/install.html]，命令行工具命令为`xp`，`xp`开启面板后登录面板`公网ip:port`就好了</a></li>
<li><strong>S1: 下载</strong>；官方网址有linux命令一键下载的</li>
<li><strong>S2: 一键部署</strong>；然后访问后台admin，在网站页面(应该是)有一键部署lnmp环境，点击一下下载即可</li>
<li><strong>S3: vscode权限问题处理</strong>；对想要修改权限的文件夹修改拥有者，比如这里要改<code>www/$USER</code>的话就<code>sudo chown -hR $USER:$USER www/$USER</code></li>
</ol>
<h3 id="php-推荐-docker"><a href="#php-推荐-docker" class="headerlink" title="php(推荐): docker"></a>php(推荐): docker</h3><blockquote>
<p>不会像phpstudy一样有什么限制这样</p>
</blockquote>
<ol>
<li>官方文档[<a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/ecs/use-cases/install-and-use-docker-on-a-linux-ecs-instance]">https://help.aliyun.com/zh/ecs/use-cases/install-and-use-docker-on-a-linux-ecs-instance]</a></li>
<li>照着上面一步一步做就好了，php部署见《搭建本地linux下的php环境》这篇blog</li>
</ol>
<h2 id="4-域名设置"><a href="#4-域名设置" class="headerlink" title="4. 域名设置"></a>4. 域名设置</h2><blockquote>
<p>用来ctf的vps的话更重要但是短域名吧</p>
</blockquote>
<ol>
<li>我搞的是github学生包里的namecheap中的免费一年的.me域名，折腾一下就好了</li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/634806678">参考文章链接</a><ol>
<li>注意要从github活动页进去才可以</li>
</ol>
</li>
<li>最后在wsl(我的话)使用<code>nslookup</code>来查询域名即可</li>
</ol>
<h2 id="Q-A"><a href="#Q-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><h3 id="SV-阿里云Docker的php服务无法访问？"><a href="#SV-阿里云Docker的php服务无法访问？" class="headerlink" title="SV | 阿里云Docker的php服务无法访问？"></a>SV | 阿里云Docker的php服务无法访问？</h3><blockquote>
<p>灵活搜索：阿里云云容器无法访问，阿里云docker php无法访问<br>找关键词：err_unsafe_port</p>
</blockquote>
<ol>
<li>可以看到返回显示err_unsafe_port，不能在危险端口，这里是6666遇到了，换一个端口就好了</li>
<li>其他的尝试<ol>
<li>iptables[<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_42108331/article/details/136310857]">https://blog.csdn.net/qq_42108331/article/details/136310857]</a></li>
<li>firewall-cmd[<a target="_blank" rel="noopener" href="https://developer.aliyun.com/ask/550019]">https://developer.aliyun.com/ask/550019]</a></li>
<li>网段设置[<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43224937/article/details/121077310]">https://blog.csdn.net/weixin_43224937/article/details/121077310]</a></li>
</ol>
</li>
</ol>
<h3 id="SV-bt部署php服务面板无法访问？"><a href="#SV-bt部署php服务面板无法访问？" class="headerlink" title="SV | bt部署php服务面板无法访问？"></a>SV | bt部署php服务面板无法访问？</h3><ol>
<li>和阿里云的docker一样的问题，危险端口，换成不是危险的端口就ok了</li>
</ol>
<h3 id="SV-阿里云Docker的php服务写入文件"><a href="#SV-阿里云Docker的php服务写入文件" class="headerlink" title="SV | 阿里云Docker的php服务写入文件"></a>SV | 阿里云Docker的php服务写入文件</h3><ol>
<li><strong>解决方案一</strong><ol>
<li>是直接使用相对路径，不要使用<code>__DIR__</code>，直接<code>$logFile=&#39;request.log</code>这样就好</li>
<li>但是后来使用<code>__DIR__</code>突然就好了，有点奇怪，总之碰到可以试试 –&gt; 传来噩耗，文件名写错了sad，request.log写成requests.log了</li>
</ol>
</li>
<li><strong>解决方案二</strong><ol>
<li>将文件夹权限改为<code>sudo chmod 777 dir</code>，就可以写入了</li>
</ol>
</li>
<li>和下面这个是无关的，ro或者rw都可以<ol>
<li><code>docker run  --name nginx-php -p 8083:80 -d -v  ~/Docker/nginx/www:/usr/share/nginx/html:ro -v ~/Docker/nginx/conf/conf.d/:/etc/nginx/conf.d:ro --link php7.3-fpm:php nginx</code>，在本地8083端口访问<code>http://localhost:8083/</code></li>
<li>其中ro是以只读 (:ro) 模式挂载了 ~&#x2F;Docker&#x2F;nginx&#x2F;www 目录。这意味着即使权限正确且 SELinux 允许，PHP 仍然无法在这个目录中创建新文件</li>
<li>需要写入可以使用:rw模式挂载他</li>
</ol>
</li>
</ol>
<h3 id="SV-阿里云php-S-0-0-0-0-port开启服务无法访问"><a href="#SV-阿里云php-S-0-0-0-0-port开启服务无法访问" class="headerlink" title="SV | 阿里云php -S 0.0.0.0:port开启服务无法访问"></a>SV | 阿里云php -S 0.0.0.0:port开启服务无法访问</h3><ol>
<li>是在不行将文件名改为index.php试试，一般是可以，注意防火墙</li>
</ol>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/archives/">Writing</a></li>
        
          <li><a href="/tags/">Tag</a></li>
        
          <li><a href="/categories/">Category</a></li>
        
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E8%B4%AD%E4%B9%B0%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.</span> <span class="toc-text">1. 购买服务器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AE%E4%B8%8Evscode"><span class="toc-number">2.</span> <span class="toc-text">2. 配置与vscode</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%83%A8%E7%BD%B2%E6%9C%8D%E5%8A%A1"><span class="toc-number">3.</span> <span class="toc-text">3. 部署服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#nodejs-%E6%89%8B%E5%8A%A8%E7%9B%B4%E6%8E%A5%E9%83%A8%E7%BD%B2ok"><span class="toc-number">3.1.</span> <span class="toc-text">nodejs: 手动直接部署ok</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lnmp-phpstudy"><span class="toc-number">3.2.</span> <span class="toc-text">lnmp: phpstudy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#php-%E6%8E%A8%E8%8D%90-docker"><span class="toc-number">3.3.</span> <span class="toc-text">php(推荐): docker</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%9F%9F%E5%90%8D%E8%AE%BE%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">4. 域名设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q-A"><span class="toc-number">5.</span> <span class="toc-text">Q&amp;A</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SV-%E9%98%BF%E9%87%8C%E4%BA%91Docker%E7%9A%84php%E6%9C%8D%E5%8A%A1%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%EF%BC%9F"><span class="toc-number">5.1.</span> <span class="toc-text">SV | 阿里云Docker的php服务无法访问？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SV-bt%E9%83%A8%E7%BD%B2php%E6%9C%8D%E5%8A%A1%E9%9D%A2%E6%9D%BF%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%EF%BC%9F"><span class="toc-number">5.2.</span> <span class="toc-text">SV | bt部署php服务面板无法访问？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SV-%E9%98%BF%E9%87%8C%E4%BA%91Docker%E7%9A%84php%E6%9C%8D%E5%8A%A1%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6"><span class="toc-number">5.3.</span> <span class="toc-text">SV | 阿里云Docker的php服务写入文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SV-%E9%98%BF%E9%87%8C%E4%BA%91php-S-0-0-0-0-port%E5%BC%80%E5%90%AF%E6%9C%8D%E5%8A%A1%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE"><span class="toc-number">5.4.</span> <span class="toc-text">SV | 阿里云php -S 0.0.0.0:port开启服务无法访问</span></a></li></ol></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/&text=ctf3r的第一台vps"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/&title=ctf3r的第一台vps"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/&is_video=false&description=ctf3r的第一台vps"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=ctf3r的第一台vps&body=Check out this article: https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/&title=ctf3r的第一台vps"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/&title=ctf3r的第一台vps"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/&title=ctf3r的第一台vps"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/&title=ctf3r的第一台vps"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/&name=ctf3r的第一台vps&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://kc1zs4.github.io/2024/10/25/ctf3r%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0vps/&t=ctf3r的第一台vps"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2023-2025
    KC1zs4&#39;s Blog
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/tags/">Tag</a></li><!--
     --><!--
       --><li><a href="/categories/">Category</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'kc1zs4-github-io';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>

<!-- utterances Comments -->

</body>
</html>
